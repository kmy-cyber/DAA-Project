# Nombre del compilador
CXX = g++
CXXFLAGS = -O2 -Wall
# Nombre del ejecutable
TARGET = main
GEN    = gen
JUDGE  = judge
HEURISTIC = heuristic

SRC_MAIN = main.cpp
SRC_HEURISTIC= heuristic.cpp
SRC_GEN   = test_generator.cpp
SRC_JUDGE = judge.cpp

RED    := \033[0;31m
GREEN  := \033[0;32m
YELLOW := \033[1;33m
BLUE   := \033[0;34m
CYAN   := \033[0;36m
RESET  := \033[0m

all: $(TARGET) $(GEN) $(JUDGE)
	@echo "$(GREEN)‚ú® Compilation finished successfully!$(RESET)"

$(TARGET): $(SRC_MAIN)
	@echo "$(BLUE)üöÄ Compiling $(SRC)...$(RESET)"
	$(CXX) $(CXXFLAGS) $(SRC_MAIN) -o $(TARGET)
	@echo "$(GREEN)‚úÖ Brute Force compiled!$(RESET)"

# Compilar generador de tests
$(GEN): $(SRC_GEN)
	@echo "$(BLUE)üöÄ Compiling $(SRC_GEN)...$(RESET)"
	$(CXX) $(CXXFLAGS) $(SRC_GEN) -o $(GEN)
	@echo "$(GREEN)‚úÖ Test generator compiled!$(RESET)"

# Compilar juez
$(JUDGE): $(SRC_JUDGE)
	@echo "$(BLUE)üöÄ Compiling $(SRC_JUDGE)...$(RESET)"
	$(CXX) $(CXXFLAGS) $(SRC_JUDGE) -o $(JUDGE)
	@echo "$(GREEN)‚úÖ Judge compiled!$(RESET)"

# Compilar juez
$(HEURISTIC): $(SRC_HEURISTIC)
	@echo "$(BLUE)üöÄ Compiling $(SRC_HEURISTIC)...$(RESET)"
	$(CXX) $(CXXFLAGS) $(SRC_HEURISTIC) -o $(HEURISTIC)
	@echo "$(GREEN)‚úÖ Heuristic compiled!$(RESET)"

full: all
	@echo "$(YELLOW)üß™ Generating tests...$(RESET)"
	./$(GEN)
	@echo "$(YELLOW)üß™ Running judge...$(RESET)"
	./$(JUDGE)
	@echo "$(CYAN)üìÑ Results in results.txt$(RESET)"
	@cat results.txt

clean:
	@echo "$(RED)üßπ Cleaning up...$(RESET)"
	rm -f $(TARGET) $(GEN) $(JUDGE) $(HEURISTIC) tests.txt input.tmp output.tmp results.txt
	@echo "$(RED)üóëÔ∏è Cleanup complete.$(RESET)"
